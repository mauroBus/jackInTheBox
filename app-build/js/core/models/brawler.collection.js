define(["class","brawlerModel","knockout"],function(e,t,n){return window.BrawlerCollection=t.extend({collection:null,url:null,ItemConstructor:null,fetchCbks:null,init:function(e){this.collection=n.observableArray([]),this.url=e?e.url||"":"",this.ItemConstructor=e?e.itemConstructor||function(){}:function(){},this.fetchCbks=[],this.mixinObsArrayMethods(),window.ko=n},parse:function(e){for(var t in e){var n=new this.ItemConstructor(e[t]);this.collection.push(n)}},fetch:function(){var e=this,t=new $.Deferred;return this._super().done(function(){e.fetchCbks.forEach(function(e){e.call()}),t.resolve()}).fail(function(){t.reject()}),t.promise()},addFetchListener:function(e){this.fetchCbks.push(e)},getItems:function(){return this.collection()},getObservable:function(){return this.collection},mixinObsArrayMethods:function(){var e=n.observableArray.fn;for(var t in e)this[t]=function(e){return function(){return this.collection[e].apply(this.collection,arguments)}}(t)}}),BrawlerCollection});